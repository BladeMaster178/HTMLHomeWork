<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script src="uscities.js"> </script>
    <script>
        //Задача 1
        //Напишите функцию counterFactory(start, step), которая при вызове возвращает 
        //другую функцию – счётчик tictoc(). start – стартовое значение счётчика, step – его шаг. 
        //При каждом вызове tictoc увеличивает значение счётчика на step
        function counterFactory(start = 0, step = 1) {
            var result = start;
            return function tictoc() {
                result = start;
                start += step;
                return result;
            };
        }
        let counter = tictoc();
        console.log(counter());
        console.log(counter());
        console.log(counter());
        console.log(counter());
        console.log(counter());
        console.log(counter());

        // //Задача 2
        // // Напишите функцию take(tictoc, x), которая вызывает функцию tictoc заданное число (x) раз
        // // и возвращает массив с результатами вызовов.
        function tictoc(start = 0, step = 1) {
            var result = start;
            return function () {
                result = start;
                start += step;
                return result;
            };
        };

        function take(tictoc, x) {
            let arr = [];
            for (let i = 0; i < x; i += 1)
                arr.push(tictoc());

            return arr;
        }

        console.log(take(tictoc(0, 2), 5));
        console.log(take(tictoc(0, 2), 6));
        console.log(take(tictoc(0, 5), 4));

        // //Задача 3
        // //Разбейте текст этой задачи на отдельные слова, удаляя по пути точки и запятые,
        // //а полученные слова сложите в массив. Напишите функцию, которая возвращает массив из тех же слов, 
        // //но развёрнутых задом наперёд, причём массив должен быть отсортирован по количеству букв в слове.
        // // Напишите другую функцию, которая считает общее количество букв с во всех элементах массива
        var str = "Разбейте текст этой задачи на отдельные слова удаляя по пути точки и запятые а полученные слова сложите в массив.";
        var words = str.split(" ").join(" ").slice(0, 112);
        // console.log(words);
        function reverseString() {
            return words.split("").reverse().join("");
        }

        console.log(reverseString());

        // //Задача 4
        // //Дан код:
        // let obj = { greeting: "Привет" };
        // function func(surname, name) {
        // alert(this.greeting + ', ' + surname + ' ' + name);
        // }
        // func();  // тут должно вывести 'привет, Иванов Иван'
        // //Добавьте в последнюю строчку метод call() так, чтобы на экран вывелось 'Привет, Иванов Иван'.Слово 
        // //'привет' возьмите из свойства объекта obj, а 'Иванов' и 'Иван' задайте как параметры функциями.
        let obj = { greeting: "Привет" };
        function func(surname = "Иванов", name = "Иван") {
            console.log(this.greeting + ', ' + surname + ' ' + name);
        }
        func.call(obj);  // тут должно вывести 'привет, Иванов Иван'
        // //Задача 5
        // //Перепишите задачу так, чтобы вместо call применялся apply.
        let obj1 = { greeting: "Привет" };
        function func(surname1 = "Иванов", name1 = "Иван") {
            console.log(this.greeting + ', ' + surname1 + ' ' + name1);
        }
        func.apply(obj1);  // тут должно вывести 'привет, Иванов Иван'

        //1. Напишите функцию, которая принимает в качестве параметра номер символа в таблице Unicode. Подсчитайте количество таких символов во всех элементах массива, как в задаче 3 из первой части практики.

        //2. Напишите функцию, которая будет возвращать частичную функцию от функции из задачи 1, фиксируя искомый символ.Например:

        //```
        // let countOfD = letterCounter(100);	// 100 = 'd' в Unicode

        // console.log(countOfD(["dad", "rod", "doctor"])); // 4
        // ```

        // Для решения задач 3 - 6 используйте файл[uscities.js](/uscities.js).

        //3. Отфильтруйте массив городов так, чтобы в нём остались только города из штата Калифорния,
        // которые с 2000 по 2013 выросли в населении.
        console.log(data.filter(city => city.state === "California"
            && parseFloat(city.growth_from_2000_to_2013) > 0))
        //4.Подсчитайте, сколько миллионов населения живёт во всех городах на широте от 25 до 30 градусов.
        // data
        //     .filter(city => city.latitude > 25 && city.latitude < 35)
        //     .reduce(function (acc, city) { return acc + parseInt(city.population) }, 0)

        console.log(data
            .reduce(function (acc, city) { return acc + ((city.latitude > 25 && city.latitude < 30) ? parseInt(city.population) : 0) }, 0));


        //5. Создайте массив только из тех городов, которые начинаются на букву D, при этом отсортируйте элементы этого массива по названию города.
        // console.log(data.filter(city => city === "D"))
        //6. Преобразуйте представленный массив "Города" в объект "Штаты":
        //	* для каждого штата – отдельное свойство объекта (ключ = название штата);
        //	* значение каждого свойства – массив городов;
        //	* каждый элемент массива – название города, население и место в общем рейтинге (rank).


        let months = ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"]
        // let a = month.filter((month, idx) => {
        //     let date = new Date();
        //     date.setMonth(idx);
        //     date.setDate(31)
        //     return date.getMonth()===idx
        // })
        // let a= month.map((month,idx)=> idx)
        // let a = months.map((month, idx) => idx + 1 + "." + month)
        // console.log(a);
        // let days = ["вс", "пн", "вт", "ср", "чт", "пт", "сб"]

        // let a = months.map((month, idx) => {
        //     let date = new Date();
        //     date.setMonth(idx + 1);
        //     date.setDate(0);
        //     // return days[date.getDay()];
        //     return date.toString().slice(0, 3);
        // })
        // console.log(a);
        months.sort((month1, month2) => {
            return month1 > month2 ? 1 : -1
        })
        console.log(months);
        let dates = ["01.10.2020", "10.01.2020", "30.08.1975"]
        dates.sort((d1, d2) => {
            return d1.split(".").reverse().join("") > d2.split(".").reverse().join("") ? 1 : -1

        })
        console.log(dates);
    </script>
</body>

</html>